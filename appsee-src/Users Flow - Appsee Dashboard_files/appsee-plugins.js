(function(n){function r(n){var t=n.find(".as-cl-item input").length,i;t>0&&(i=n.find(".as-cl-item input:checked").length,i>=t?(n.find(".group-title input").prop("checked",!0),n.find(".group-title input").iCheck("update")):(n.find(".group-title input").prop("checked",!1),n.find(".group-title input").iCheck("update")))}function e(t,i,r){var u=n(i).offset().top+r,e=u+n(i).height()-r,f=n(t).offset().top,o=f+n(t).height();f<u&&n(i).scrollTop(n(i).scrollTop()-(u-f));o>e&&n(i).scrollTop(n(i).scrollTop()+(o-e))}function u(n,t){var r=Math.floor(n.parent().innerWidth()),f=(t.settings.data.length+1)*t.settings.boxSize,e=Math.max(t.settings.minLineWidth,Math.floor((r-f)/t.settings.data.length)),u,o,i;for(n.find(".as-line").show(),n.find(".as-box").show(),u=0,o=t.settings.boxSize,i=0;i<t.settings.data.length;i++)o+=e+t.settings.boxSize,o>r?(n.find(".as-line").eq(i).hide(),n.find(".as-box").eq(i+1).hide()):u++;f=(u+1)*t.settings.boxSize;e=Math.floor((r-f)/u);n.width(r+10);n.find(".as-line").width(e)}function f(t){n(t).find(".as-info-mark").remove();n(t).data("as-info-hover",null)}var i=function(n,t){this.init("as-appsee-table",n,t)},t;i.prototype={constructor:i,init:function(t,i,r){this.type=t;this.component=n(i);var u=this;this.enabled=!0;this.loaderAnimation=null;this.settings={stopPropagation:!0};n.extend(this.settings,r);this.render()},render:function(){this.loading=!1;this.tableEmpty=!0;this.noMoreData=!1;this.pageCounter=1;this.data=[];this.sortColumn=null;this.keys={};this.component.html("");this.component.addClass(this.type);this.tableHeaderContainer=n("<table/>").addClass("appsee-plugin-table");this.createColumns();this.mainTable=this.tableHeaderContainer.clone();this.component.append(this.tableHeaderContainer);this.tableHeaderContainer.addClass("appsee-plugin-table-header");this.mainTable.addClass("appsee-plugin-main-table");this.mainTableDiv.append(this.mainTable);this.component.append(this.mainTableDiv);this.loaderAnimation=n('<tbody id="appsee-load-tbody"><tr><td colspan="'+this.settings.visibleColumnsCount+'"><div class="appsee-table-loader"><div class="ajax-loader-small" style="display:inline-block;vertical-align:top;margin-right:5px;" /><div style="display:inline-block;margin-top:5px;">Loading...<\/div><\/div><\/td><\/tr><\/tbody>');this.mainTable.append(this.loaderAnimation);Array.isArray(this.settings.data)?(this.loadRows(this.settings.data),this.loadRows(null)):this.settings.data.apply(this,[0]);this.checkScrollerPosition();this.registerEvents()},createColumns:function(){var t=this,r=n("<thead/>"),u=n("<tr/>"),i=[];this.settings.cookieName&&(i=n.cookie(this.settings.cookieName)!=null?n.cookie(this.settings.cookieName).split(";"):null);this.settings.hiddenColums=!1;this.settings.visibleColumnsCount=0;this.settings.columns.forEach(function(r,f){if(r.hide){t.settings.hiddenColums=!0;return}t.settings.visibleColumnsCount++;var e=n('<th class="appsee-plugin-th" ><\/th>'),o=n("<div/>");t.settings.cookieName&&i&&i.length>f&&!t.settings.hiddenColums?e.css("width",i[f],"important"):r.width&&e.css("width",r.width,"important");o.append(r.title);e.addClass(r.title);t.settings.defaultSortedColumnsIndex&&t.settings.defaultSortedColumnsIndex==f&&r.sortBy&&(t.sortColumn=r,t.descending?o.append(n('<i class="sort-marker fa fa fa-caret-down"><\/i>')):o.append(n('<i class="sort-marker fa fa-caret-down"><\/i>')));o.appendTo(e);u.append(e)});this.mainTableDiv=n('<div  class="appsee-plugin-main-table-container ">');r.append(u);this.tableHeaderContainer.append(r)},registerEvents:function(){var n=this;this.settings.stopPropagation&&this.mainTableDiv.mousewheelStopPropagation();typeof this.settings.resizable!="undefined"&&this.settings.resizable||this.enableResizing();appsee.addTransientWindowResizeHandler(function(){n.tableResized()});this.mainTableDiv.scroll(function(){n.checkScrollerPosition()})},enableResizing:function(){var i=this,f="",r=[],u=[],t=0;this.settings.columns.forEach(function(n){n.hide||(r[t]=n.minWidth?n.minWidth:50,u[t]=n.maxWidth?n.maxWidth:null,n.disableResizing&&(r[t]=u[t]=n.width),t++)});this.tableHeaderContainer.colResizable({liveDrag:!0,minWidth:r,maxWidth:u,dragCursor:"ew-resize",hoverCursor:"ew-resize",onDrag:function(t){var u=n(t.currentTarget).find("th"),e=n(t.currentTarget).parent().find(".appsee-plugin-main-table th"),i,r;for(f="",i=0;i<u.length;i++)r=n(u[i]).innerWidth()/n(t.currentTarget).width()*100+"%",n(e[i]).width(r),f+=r+";"},onResize:function(){i.settings.cookieName&&!i.settings.hiddenColums&&n.cookie(i.settings.cookieName,f)}});this.settings.columns.forEach(function(n,t){n.disableResizing&&n.disableResizing&&i.component.find(".JColResizer:eq("+t+")").addClass("disabled-draging")});this.syncTableHeaders()},syncTableHeaders:function(){for(var r=this.tableHeaderContainer.find("th"),i=this.mainTable.find("th"),t=0;t<i.length;t++)n(r[t]).width(n(i[t]).innerWidth()/this.tableHeaderContainer.width()*100+"%")},tableResized:function(){this.tableHeaderContainer.width(this.mainTable.innerWidth());this.syncTableHeaders()},selectRow:function(n){if(this.settings.rowSelectable!==!1){this.mainTable.find("tr.selectedRow").removeClass("selectedRow");var t=this.mainTable.find("tbody tr:eq("+n+")");t.addClass("selectedRow");this.rowSelected(t,this.data[n]);e(t,this.mainTableDiv,this.tableHeaderContainer.height())}},refresh:function(n){typeof n=="undefined"&&(n=!0);this.render();n&&this.selectRow(0)},hideColumn:function(n,t){this.settings.columns[n].hide=t},loadRows:function(t){var i,r;this.loading=!1;this.tableEmpty&&this.loaderAnimation.detach();i=this;t!=null&&t.length>0?(t.forEach(function(t,r){var f=n("<tr />"),o,e,s,u;if(i.tableEmpty&&"selectedRow"in i.settings&&i.settings.selectedRow==r&&(f.addClass("selectedRow"),i.settings.rowSelected&&i.settings.rowSelected(t)),f.click(function(){i.rowSelected(n(this),t)}),!(i.settings.rowKey(t)in i.keys)){if(f.attr("data-row-key",i.settings.rowKey(t)),i.keys[i.settings.rowKey(t)]=null,i.settings.columns.forEach(function(i){if(!i.hide){var r=n("<td />");typeof i.accessor=="string"||i.accessor instanceof String?r.text(t[i.accessor]):r.append(i.accessor(t));r.addClass(i.title);i.tooltip&&(typeof i.tooltip!="boolean"?r.attr("title",i.tooltip(t)):i.tooltip&&r.attr("title",typeof i.accessor=="string"||i.accessor instanceof String?t[i.accessor]:i.accessor(t)));f.append(r)}}),o=i.data.length,e=null,i.sortColumn&&i.data.length>0)for(s=i.sortColumn.sortOrder[0].toLowerCase()==="descending",u=i.data.length-1;u>=0;u--){if(i.compare(t,i.data[u])<0&&s||i.compare(t,i.data[u])>0&&!s)break;o=u;e=i.mainTable.find("tbody tr:eq("+u+")")}e!=null?f.insertBefore(e):i.mainTable.append(f);i.data.splice(o,0,t)}}),this.loaderAnimation!=null&&this.tableEmpty&&(this.mainTable.append(this.loaderAnimation),this.tableEmpty=!1,this.settings.externalElement&&(r=n(this.settings.externalElement).clone(),r.css("right",this.mainTableDiv.verticalScrollBarWidth()),r.show(),this.component.append(r))),this.tableHeaderContainer.width(this.mainTable.innerWidth()),this.syncTableHeaders()):this.loaderAnimation!=null&&(this.loaderAnimation.hide(),this.noMoreData=!0,this.mainTableDiv.unBindMousewheelEvent());this.tableEmpty&&(this.settings.noData?this.mainTable.append(this.settings.noData):this.mainTable.append('<div class="noData">No Data Available<\/div>'),this.tableEmpty=!1,this.tableHeaderContainer.width(this.mainTable.innerWidth()),this.noMoreData=!0)},rowSelected:function(t,i){this.settings.rowSelectable!==!1&&(n(".selectedRow").removeClass("selectedRow"),n(t).addClass("selectedRow"),this.settings.rowSelected&&this.settings.rowSelected(i,!0))},checkScrollerPosition:function(){var n=this.mainTableDiv.scrollTop(),t=this.mainTableDiv.prop("scrollHeight"),i=this.mainTableDiv.prop("clientHeight");n>=t-(i+10)&&!this.tableEmpty&&!this.noMoreData&&!this.loading&&(this.loaderAnimation.show(),this.loading=!0,this.settings.data.apply(this,[++this.pageCounter]))},compare:function(n,t){var u=this.sortColumn.sortBy&&typeof this.sortColumn.sortBy=="boolean"?this.sortColumn.accessor:this.sortColumn.sortBy,i=u(n),r=u(t);return i!=null&&r!=null?i>r?1:i==r?0:-1:i==null&&r==null?0:i!=null?-1:1}};n.fn.appseeTable=function(t){var r=Array.prototype.slice.call(arguments);return this.each(function(){var f=n(this),u=f.data("as-appsee-table"),e=typeof t=="object"&&t;u||f.data("as-appsee-table",u=new i(this,e));typeof t=="string"&&u[t].apply(u,r.splice(1))})};n.fn.unBindMousewheelEvent=function(){return this.each(function(){var r=navigator.userAgent.toLowerCase(),u=/(trident|msie)/.test(r),i=document.documentElement,t="mousewheel";"onmousewheel"in i?t="mousewheel":"onwheel"in i?t="wheel":"DOMMouseScroll"in i&&(t="DOMMouseScroll");n(this).off(t)})};n.fn.hasVerticalScrollBar=function(){return this.get(0).scrollHeight>this.height()};n.fn.verticalScrollBarWidth=function(){return this.hasVerticalScrollBar()?appseeUtils.getScrollBarWidth():0};n.fn.appseeCheckList=function(t){return this.each(function(){var i=n(this),p=i.data("as-check-list"),u,f,v,h,l,a,y;if(!p){u={settings:n.extend({search:!0,cols:2,selectall:"Select All",async:!1},t)};i.data("as-check-list",u);i.addClass("as-check-list");i.find(".as-cl-container").outerHeight(i.parent().innerHeight());i.find(".as-cl-item").css("width",100/u.settings.cols-1+"%");f=n("<div/>").addClass("search-container");i.prepend(f);u.settings.search&&(f.prepend(n("<input/>").addClass("search-box m-wrap").prop("type","text").prop("placeholder","Filter...")),f.find(".search-box").keyup(function(){var t=n.trim(n(this).val()).toLowerCase();t.length>0?(i.find(".as-cl-item").hide(),i.find(".as-cl-item").removeClass("as-cl-show"),i.find(".as-cl-group").hide(),i.find(".as-cl-item[data-search-value*='"+t+"']").addClass("as-cl-show").show(),i.find(".as-cl-show").parents(".as-cl-group").show()):(i.find(".as-cl-item").show(),i.find(".as-cl-group").show())}));function w(){i.find(".search-container").hide();i.find(".as-cl-container").hide();i.find(".as-check-list-loading-div").show()}function b(){i.find(".as-check-list-loading-div").hide();i.find(".as-cl-container").show();i.find(".search-container").show()}v=n("<div/>").addClass("as-check-list-loading-div").append(n("<div/>").addClass("ajax-loader-large")).hide();i.prepend(v);h=n("<div/>").addClass("top-panel");i.find(".as-cl-container").prepend(h);var o=i.find(".as-cl-group input"),k=i.find(".as-cl-group .group-title input"),d=i.find(".as-cl-item input");function s(){var n=i.find(".as-cl-item input:checked").length;return n==0}function e(){i.toggleClass("all-selected",s())}function c(t){u.settings.async?o.each(function(i,r){setTimeout(function(){n(r).prop("checked",t).iCheck("update")},0)}):o.prop("checked",t).iCheck("update")}u.settings.selectall&&(l=n('<label class="checkbox select-all"><input type="checkbox" /> '+u.settings.selectall+"<\/label>"),h.append(l),l.find("input").on("ifToggled",function(){var t=n(this).is(":checked");t?(i.find(".as-cl-item input:checked").addClass("as-cl-old-checked"),c(!1)):i.find(".as-cl-item input.as-cl-old-checked").prop("checked",!0).removeClass("as-cl-old-checked").iCheck("update");u.settings.async?o.each(function(i,r){setTimeout(function(){n(r).iCheck(t?"disable":"enable")},0)}):o.iCheck(t?"disable":"enable");i.toggleClass("disabled",t);f.find(".select-all-btns").toggle(!t);e();i.trigger("changed")}).prop("checked",s()),f.append(n('<div><div class="select-all-btns btn-group"><button type="button" class="btn select-all"><i class="fa fa-check-square-o"><\/i>Select All<\/button><button type="button" class="btn clear-all"><i class="fa fa-square-o"><\/i>Clear All<\/button><\/div><\/div>')),f.find(".select-all").click(function(){c(!0);e();i.trigger("changed")}),f.find(".clear-all").click(function(){c(!1);e();i.trigger("changed")}),o.prop("disabled",s()),i.toggleClass("disabled",s()),f.find(".select-all-btns").toggle(!s()));a=i.find('input[type="checkbox"]');y=a.length;u.settings.async?(w(),a.each(function(t,r){setTimeout(function(){n(r).iCheck({checkboxClass:"icheckbox_square-grey"});t==y-1&&(b(),i.find(".as-cl-container").show())},t)})):i.find('input[type="checkbox"]').iCheck({checkboxClass:"icheckbox_square-grey"});k.on("ifToggled",function(){var t=n(this).is(":checked");n(this).parents(".as-cl-group").find(".as-cl-item input").prop("checked",t);n(this).parents(".as-cl-group").find(".as-cl-item input").iCheck("update");e();i.trigger("changed")});d.on("ifToggled",function(){r(n(this).parents(".as-cl-group"));e();i.trigger("changed")});i.find(".as-cl-group").each(function(){r(n(this))});e()}})};n.fn.appseeTimeline=function(t){return this.each(function(){var r=n(this),v=r.data("as-timeline"),i,o,f,e,l,a,s,h,c;if(!v&&(r.addClass("as-timeline"),i={settings:n.extend({boxSize:28,boxColor:"#000",lineColor:"#000",minLineWidth:70},t)},r.data("as-timeline",i),i.settings.data.length>0)){for(o=n('<div class="as-box"><div class="as-inner">1<sup>st<\/sup><\/div><\/div>'),o.find(".as-inner").css("background",i.settings.boxColor),r.append(o),f=0;f<i.settings.data.length;f++)e=n('<div class="as-line"><div class="as-inner"><\/div><div class="as-inner-border"><\/div><\/div>'),l=e.find(".as-inner"),l.html(i.settings.data[f]),a=e.find(".as-inner-border"),a.css("border-top-color",i.settings.lineColor),r.append(e),s=n('<div class="as-box"><div class="as-inner"><\/div><\/div>'),h=s.find(".as-inner"),h.css("background",i.settings.boxColor),c=f+2,h.html(c+"<sup>"+c.toOrdinalSuffix()+"<\/sup>"),r.append(s);r.find(".as-box .as-inner").width(i.settings.boxSize).height(i.settings.boxSize);u(r,i);appsee.addTransientWindowResizeHandler(function(){u(r,i)})}})};n.fn.getAttributesWithPrefix=function(t,i,r){var u={};return this.each(function(){n.each(this.attributes,function(){if(!t||this.name.indexOf(t)==0){var n=this.name;t&&i&&(n=n.substring(t.length));r&&(n=n.replace(/-([a-z])/g,function(n){return n[1].toUpperCase()}));u[n]=this.value}})}),u};n.fn.appseeInfoHover=function(t){return this.each(function(){var u=n(this),a,i,r,o,s,h,v,c,e,w,l;if(t=="remove"){f(u);return}if(t&&n(u).find(".as-info-mark").length>0&&f(u),a=u.data("as-info-hover"),!a&&(u.addClass("as-info-hover"),i={settings:n.extend({top:null,right:null,bottom:null,left:null,content:null,placement:"bottom",selector:null,width:"200px",height:null,color:null,sticky:!1,icon:"fa-question-circle",fixed:!1},t)},u.data("as-info-hover",i),n.extend(i.settings,u.getAttributesWithPrefix("data-info-hover-",!0)),i.settings.content||i.settings.selector)){r=n('<div class="as-info-mark"><i class="fa '+i.settings.icon+'"><\/i><\/div>');r.appendTo(u);i.settings.fixed||r.hide();o=!0;i.settings.top&&(o=!1,r.css("top",i.settings.top));i.settings.right&&(o=!1,r.css("right",i.settings.right));i.settings.bottom&&(o=!1,r.css("bottom",i.settings.bottom));i.settings.left&&(o=!1,r.css("left",i.settings.left));o&&(r.css("bottom",i.settings.bottom="5px"),r.css("left",i.settings.left="5px"));s={html:!0,placement:i.settings.placement,animation:!1,trigger:"manual",container:"body"};i.settings.content?(h=n('<div class="info-content" style="display: block;">'+i.settings.content+"<\/div>"),i.settings.width&&h.width(i.settings.width),i.settings.height&&h.height(i.settings.height),s.content=h):i.settings.selector&&(v=u.find(i.settings.selector),s.content=function(){return v.show()});c=5;e=r.find("i");e.popover(s);i.settings.color&&e.css("color",i.settings.color);i.hide=!0;function y(){i.hide=!1;e.popover("show")}function p(){i.hide=!0;i.settings.sticky?setTimeout(function(){i.hide&&(i.tip&&i.tip.hide(),e.popover("hide"))},c):e.popover("hide")}i.settings.sticky&&(w=e.data("popover"),i.tip=w.tip(),i.tip.hover(y,p));e.hover(y,p);l=300;i.settings.fixed||u.hover(function(){r.stop();r.css("opacity",1);r.show()},function(){i.settings.sticky?setTimeout(function(){i.hide&&r.fadeOut(l)},c):r.fadeOut(l)})}})};n.fn.appseeSelect=function(t){var i=arguments;return this.each(function(){var r=n(this).addClass("as-select"),u=r.data("as-select"),f=function(n,t){var u=t==null?r.next().find("div.as-select-all-cb"):t,i=u.find("span");n?(r.next().find("div.as-select-all-cb").addClass("all-selected"),i.text("deselect all")):(r.next().find("div.as-select-all-cb").removeClass("all-selected"),i.text("select all"))},l=function(){var u=n("<span />").css({"margin-right":"5px","font-size":"12px"}).text("select all"),t=n("<div />").addClass("as-select-all-cb").append(u).append('<i class="glyphicon glyphicon-ok icon-ok check-mark"><\/i>'),i;t.click(function(t){var i=r.next().find("div.as-select-group-cb");n(this).hasClass("all-selected")?(r.appseeSelect("deselectAll"),i.removeClass("group-selected"),f(!1)):(r.appseeSelect("selectAll"),i.addClass("group-selected"),f(!0));t.stopPropagation()});i=n("<div />").addClass("as-select-all-wrapper").append(t);r.next().find("div.dropdown-menu ul").before(i)},a=function(t){var i=t.closest("li");return i.add(t.parent().nextUntil(n("li").has(".div-contain")))},e=function(t,i){var e=r.val(),u,o;e=e||[];u=a(t).find("a span").map(function(){return n(this).text()}).get();u=u||[];i?(r.val(e.concat(u)),r.selectpicker("render"),t.find("div.as-select-group-cb").addClass("group-selected")):(r.val(e.filter(function(n){return u.indexOf(n)==-1})),r.selectpicker("render"),t.find("div.as-select-group-cb").removeClass("group-selected"));o=r.next().find(".dropdown-menu ul li:not(.selected)").length==0;f(o)},o=function(){var t=n("<div />").addClass("as-select-group-cb").append('<i class="glyphicon glyphicon-ok icon-ok check-mark"><\/i>'),i;t.click(function(t){var i=n(this).closest("dt");n(this).hasClass("group-selected")?e(i,!1):e(i,!0);t.stopPropagation()});i=r.next().find(".dropdown-menu ul li > dt");i.append(t)},s=function(){var u=r.next().find(".dropdown-menu ul li"),i=!0,t=null;u.each(function(){var r=n(this),u=r.find("dt");u.length>0&&(t=u,t.find(".as-select-group-cb").addClass("group-selected"));r.hasClass("selected")||(t!=null&&t.find(".as-select-group-cb").removeClass("group-selected"),i=!1)});f(i)},v=function(){u.settings.selectGroupEnabled&&o();u.settings.selectAllEnabled&&l()},y=function(){r.selectpicker("refresh");u.settings.selectGroupEnabled&&(o(),s());r.next().find(".dropdown-menu ul li").length==0?r.next().find(".as-select-all-wrapper").hide():r.next().find(".as-select-all-wrapper").show()},p=function(){r.next().children("button").find("div.caret").hide();r.next().children("button").css("background-image","url(/Images/loaders/ajax-loader-filter.gif");r.next().children("button").css("background-repeat","no-repeat");r.next().children("button").css("background-position",r.next().outerWidth()-30+"px 6px")},w=function(){r.next().children("button").find("div.caret").show();r.next().children("button").css("background-image","");r.next().children("button").css("background-repeat","");r.next().children("button").css("background-position","")},h={refresh:y,showLoading:p,hideLoading:w},c;if(typeof t=="string")return u?t in h?h[t].apply(null):r.selectpicker.apply(r,i):null;if(u)return r;c=n.extend(r.getAttributesWithPrefix("data-",!0,!0),t);u={settings:n.extend({selectAllEnabled:r.attr("multiple")!=null,selectGroupEnabled:!0},c)};r.selectpicker(u.settings);v();r.on("change",function(){s()});r.next().find(".bootstrap-select-searchbox > input").on("input",function(){n(this).val()!=""?(r.next().find("div.as-select-all-wrapper").hide(),r.next().find("div.as-select-group-cb").css("display","none")):(r.next().find("div.as-select-all-wrapper").show(),r.next().find("div.as-select-group-cb").css("display","inline-block"))});return r.data("as-select",u),r})};n.fn.appseeSelectEvent=function(t){var u=arguments,i=function(t){var i=null;if(t.find("select:first").val()){if(i={},t.find("select:first").val()==="Nothing Selected")return i;i.EventNames=t.find("select:first").val();Array.isArray(i.EventNames)||(i.EventNames=[i.EventNames]);t.find("div.appsee-events-plugin-select-prop select.appsee-events-plugin-property-name-selector").val()&&t.find("div.appsee-events-plugin-select-prop select.appsee-events-plugin-property-name-selector").val()!=="Select"&&(i.EventProperties=[],t.find("div.appsee-events-plugin-select-prop select.appsee-events-plugin-property-name-selector").each(function(t,r){if(n(r).val()!=="Select"){var e=n(r).val(),f=n(r).parent().find("select.appsee-events-plugin-property-operator-selector").val(),u=n(r).parent().find("input.appsee-events-plugin-property-input").val();u=u===""?null:u;f==="Exists"&&(u=null,f=null);i.EventProperties.push({EventPropertyName:e,EventPropertyOperator:f,EventPropertyValue:u})}}))}return i},f=function(n){var t=i(n),u,r;if(t===null)return!0;if(t.EventNames.length===0)return!1;for(u in t.EventProperties)if(r=t.EventProperties[u],r.EventPropertyValue===null&&r.EventPropertyOperator!==null)return!1;return!0},r={isValid:f,val:i};return typeof t=="string"&&t in r?r[t](n(this)):this.each(function(){function o(){var n=i(f);r.onChange(n)}function v(){f.empty();f.data("as-select","")}function s(){r.onFinishedLoading()}var f=n(this).addClass("as-select"),r=f.data("as-select"),a=function(t){r.selector.attr("disabled","disabled").appseeSelect("refresh");n.ajax({type:"POST",url:location.origin+"/analytics/event-names",data:{appId:r.settings.appId,platform:r.settings.platform},success:function(i){i=n.parseJSON(i);r.settings.multiple||r.selector.append("<option selected>Nothing Selected<\/option>").append(n("<option data-divider='true'/>"));i.forEach(function(n){var i="";t&&t.EventNames.indexOf(n)>-1&&(i="selected");r.selector.append("<option "+i+" value='"+n+"'>"+n+"<\/option>")});t?r.selector.trigger("change",[t]):s();r.selector.removeAttr("disabled").appseeSelect("refresh")},error:function(){var t=n("<font>Error fetching data<\/font>");r.selector.parent().append(t)}})},c={empty:v},h,l,e;if(typeof t=="string")return r?t in c?c[t].apply(null):f.selectpicker.apply(f,u):null;if(r)return f;h="";t.multiple&&(h="multiple");l=n.extend(f.getAttributesWithPrefix("data-",!0,!0),t);r={onChange:t.onChange?t.onChange:n.noop,onFinishedLoading:t.onFinishedLoading?t.onFinishedLoading:n.noop,mode:t.mode,maxProperties:t.maxProperties,addAnotherPropertyText:t.addAnotherPropertyText?t.addAnotherPropertyText:"Match by properties",settings:n.extend({size:t.size?t.size:10,platform:t.platform,appId:t.appId,selectAllEnabled:!1},l)};e=n("<select "+h+" data-live-search='true' data-size='"+r.settings.size+"' title='Select Event"+(t.multiple?"s":"")+"' data-width='100%'><\/select>");f.html(e);r.selector=e;e.appseeSelect(r.settings);a(t.val);e.on("change",function(t,i){var u,e,c,h;selectedEvent=r.selector.val();f.find("div.appsee-events-plugin-select-prop").remove();r.maxProperties===0||selectedEvent===""||selectedEvent===null||r.settings.multiple&&r.settings.multiple&&selectedEvent.length!==1?s():(f.find("div.appsee-events-plugin-select-prop").remove(),u=n("<div class='appsee-events-plugin-select-prop'><\/div>"),e=n("<a class='appsee-events-plugin-properties-link'><\/a>"),e.unbind("click"),e.html(r.addAnotherPropertyText),u.append(e),c=r.settings,h=null,e.click(function(){function t(t){var a,y,p,v,w;if(t&&t.length!==0){var b=n("<div class='appsee-events-plugin-add-property'><\/div>"),h=n("<select  data-live-search='true' data-size='"+r.settings.size+"' class='appsee-events-plugin-property-name-selector'><\/select>"),l=n("<input type=text class='appsee-events-plugin-property-input'/>"),c=e.clone();for(b.append(h).append(c).append(l),u.append(b),(r.maxProperties==null||r.maxProperties!=null&&r.maxProperties<f.find("div.appsee-events-plugin-select-prop div.appsee-events-plugin-add-property").length)&&u.parent().append(addAnotherPropertiesLink.hide()),h.append("<option selected>Select<\/option>"),h.append(n("<option data-divider='true'/>")),a=0;a<t.length;a++)h.append(n("<option value='"+t[a]+"'><\/option>").html(t[a]));y=null;p=null;i&&i.EventProperties&&i.EventProperties.length>0&&(v=i.EventProperties.shift(),h.val(v.EventPropertyName),p=v.EventPropertyOperator,y=v.EventPropertyValue);h.appseeSelect();l.change(function(){o()});l.keyup(function(){o()});w=function(n,t,r){t!=null&&(c.val(t),c.appseeSelect("refresh"));h.val()==="Select"||c.val()==="Exists"?(l.val("").hide(),c.next().addClass("appsee-events-plugin-property-operator-selector"),c.next().removeClass("appsee-events-plugin-property-operator-selector-narrow")):c.val()!=="Exists"&&(l.val(r!=null?r:"").css("display","inline-block"),c.next().addClass("appsee-events-plugin-property-operator-selector-narrow"),c.next().removeClass("appsee-events-plugin-property-operator-selector"));i&&i.EventProperties&&i.EventProperties.length>0?addAnotherPropertiesLink.find("a").click():(h.val()==="Select"?addAnotherPropertiesLink.hide():addAnotherPropertiesLink.show(),o(),s())};r.mode==="existsOnly"?(n(c).hide(),h.next().addClass("appsee-events-plugin-property-name-div-selector-exists-only")):(c.appseeSelect(),h.next().addClass("appsee-events-plugin-property-name-div-selector"));h.change(w);c.change(w);h.trigger("change",[p,y])}else u.append("No properties found")}addAnotherPropertiesLink=n("<div class='appsee-events-plugin-select-prop'><\/div>").append(n(this).clone(!0).html("Add another property"));n(this).remove();var e=n("<select class='appsee-events-plugin-property-operator-selector'>"+(!r.mode||r.mode==="existsOnly"||r.mode!=="equalsOnly"?"<option selected value='Exists'>Exists<\/option>":"")+(!r.mode||r.mode==="equalsOnly"||r.mode!=="existsOnly"?"<option value='='>=<\/option>":"")+(r.mode==="equalsOnly"||r.mode==="existsOnly"?"":"<option value='!='>!=<\/option><option value='>'>&gt;<\/option><option value='>='>&gt;=<\/option><option value='<'>&lt;<\/option><option value='<='>&lt;=<\/option>")+"<\/select>");h?t(h):n.ajax({type:"POST",url:"/analytics/event-property-names",data:{version:"all",appId:c.appId,platform:c.platform,device:"all",date:"range,"+moment().subtract(48,"months").format("M-D-YYYY")+",max",eventName:selectedEvent},success:function(n){h=n;t(h)},error:function(){var t=n("<font>Error fetching data<\/font>");u.append(t)}})}),i&&i.EventProperties&&i.EventProperties.length>0?e.click():(u.find("a").delay(150).fadeIn(),s()),f.append(u));o()});f.next().find(".bootstrap-select-searchbox > input").on("input",function(){n(this).val()!=""?(f.next().find("div.as-select-all-wrapper").hide(),f.next().find("div.as-select-group-cb").css("display","none")):(f.next().find("div.as-select-all-wrapper").show(),f.next().find("div.as-select-group-cb").css("display","inline-block"))});return f.data("as-select",r),f})};n.fn.setEnabled=function(t){this.each(function(){t?n(this).removeClass("disabled"):n(this).addClass("disabled")})};t=function(n,t){this.init(n,t)};t.prototype={constructor:t,defaults:{button:"hover",hoverTriggerSelector:null,title:"Click to edit",trim:!0,applyRename:function(){return!0}},init:function(t,i){this.$element=n(t);this.options=this.getOptions(i);this.options.initialText=this.$element.text();this.$element.text("");this.$spanText=n("<span />").append(this.options.initialText);this.$inputText=n('<input type="text" />').addClass("m-wrap").css({width:"100px",margin:"0"}).hide();this.$renameButton=n('<i class="icon fa fa-pencil" />').css({"margin-left":"5px",cursor:"pointer"});this.$element.append([this.$spanText,this.$inputText,this.$renameButton]);this.options.button!="on"&&this.$renameButton.hide();this.options.title&&(this.$spanText.attr("title",this.options.title),this.$renameButton.attr("title",this.options.title));this.addEvents()},getOptions:function(t){return n.extend({},this.defaults,this.$element.data(),t)},addEvents:function(){var t=this,i;this.$renameButton.click(function(){t.toggleRename(!0)});this.options.button=="hover"&&(i=this.options.hoverTriggerSelector?n(this.options.hoverTriggerSelector):this.$spanText,i.mouseover(function(){t.options.renameState||t.$renameButton.show()}),i.mouseout(function(){t.$renameButton.hide()}));this.$spanText.click(function(){t.toggleRename(!0)});this.$inputText.focusout(function(){t.handleRenaming()});this.$inputText.keyup(function(n){n.keyCode==13&&t.handleRenaming()})},handleRenaming:function(){var n=this.$inputText.val(),t;if(this.options.trim&&(n=n.trim(),this.$inputText.val(n)),n==""||n==this.$spanText.text()){this.discardChange();return}t=this.options.applyRename.apply(this,[n]);t&&this.commitChange()},commitChange:function(){this.$spanText.text(this.$inputText.val());this.toggleRename(!1)},discardChange:function(){this.toggleRename(!1)},toggleRename:function(n){n?(this.$inputText.show(),this.options.button!="off"&&this.$renameButton.hide(),this.$spanText.hide(),this.$inputText.val(this.$spanText.text()),this.$inputText.select()):(this.$inputText.hide(),this.options.button=="on"&&this.$renameButton.show(),this.$spanText.show());this.options.renameState=n}};n.fn.appseeEditableText=function(i){var r=Array.prototype.slice.call(arguments);return this.each(function(){var f=n(this),u=f.data("as-editable-text"),e=typeof i=="object"&&i;u||f.data("as-editable-text",u=new t(this,e));typeof i=="string"&&u[i].apply(u,r.splice(1))})};n.fn.appseeDropdown=function(t){return this.each(function(){function u(t){return function(){i.selected=t;f(n(this));i.onClick(t)}}function s(t){var f=i.valueAccessor(i.selectedItem)==i.valueAccessor(t),r=n("<a/>").addClass("dropdown-item").text(i.textAccessor(t)).click(u(t));return f&&r.addClass("active"),n("<li/>").append(r)}function h(t){var f=i.valueAccessor(i.selectedItem)==i.valueAccessor(t),r=n("<button/>").addClass("btn btn-info dropdown-item").attr("type","button").text(i.textAccessor(t)).click(u(t));return f&&r.addClass("active"),r}function f(n){r.find(".btn-group").removeClass("open");r.find("*").removeClass("active");n.addClass("active");n.is("a")?(n.parent().addClass("active"),r.find("a.dropdown").addClass("active"),r.find("a.dropdown span.text").html(n.text())):r.find("a.dropdown span.text").html("More")}function c(){function h(){var t=r.parent().width(),u=r.children("div.btn-group").width(),n=r.find("button").length;return n>i.maxButtons||n>i.minButtons&&t<u}var o=i.items.slice(),t,u,f,e;for(i.customItem&&r.find("div.btn-group > div.btn-group").show();h();)t=o.pop(),u=s(t),r.find(".dropdown-menu").prepend(u),r.find("button").last().remove(),r.find("div.btn-group > div.btn-group").show();i.customItem&&(f=n("<a/>").attr("id","customItemDropdown").addClass("dropdown-item").text(i.customItem).click(i.customItemOnClick),e=n("<li/>").append(f),r.find(".dropdown-menu").prepend(e))}function e(){r.empty();var t=n("<div/>").addClass("btn-group").attr("data-toggle","buttons-radio").css("float","right");i.items.forEach(function(n){t.append(h(n))});t.append(n("<div/>").addClass("btn-group").append(n("<a/>").addClass("btn").addClass("dropdown").attr("href","#").attr("data-toggle","dropdown").append(n("<span/>").addClass("text").text("More")).append(document.createTextNode(" ")).append(n("<span/>").addClass("caret")).click(function(){var r=n(this).parent(),t=r.find("ul.dropdown-menu"),i=t.find("li.active");i.length>0&&setTimeout(function(){t.scrollTop(i.offset().top-t.offset().top+t.scrollTop())},1)})).append(n("<ul/>").addClass("dropdown-menu")).hide());r.append(t);i.items.length>=i.minItemsForCollapse&&c();f(r.find(".dropdown-item.active"))}function l(){r.empty();r.data("as-dropdown","")}var r=n(this),i=r.data("as-dropdown"),o={resize:e,empty:l};if(t in o)return i?o[t]():void 0;i||(i=n.extend({items:[],selectedItem:null,onClick:function(){},textAccessor:function(n){return n},valueAccessor:function(n){return n},minButtons:1,maxButtons:5,minItemsForCollapse:1,customItem:"",customItemOnClick:function(n){return n}},t),r.data("as-dropdown",i),e())})};n.fn.textWidth=function(t,i){return n.fn.textWidth.fakeEl||(n.fn.textWidth.fakeEl=n("<span>").hide().appendTo(document.body)),n.fn.textWidth.fakeEl.text(t||this.val()||this.text()).css("font",i||this.css("font")),n.fn.textWidth.fakeEl.width()};n.fn.appseeTags=function(t){return this.each(function(){function f(){var t=r.find(".tagit-new input");t.val()==""?(t.val("Add tag..."),f(),t.val("")):n(t).css("width",n(t).textWidth()+8)}function h(n){var t=r.find(".tagit-new");t.popover("destroy").popover({content:n,trigger:"manual",html:!0}).popover("show");u.isPopoverVisible==!1&&(u.isPopoverVisible=!0,setTimeout(function(){u.isPopoverVisible=!1;t.popover("hide")},i.messageVisibleTime))}function c(){h(i.limitExceededMessage)}function l(n,t){return t.tagLabel.startsWith("_")?(h(i.invalidTagMessage),!1):!0}function o(){var n=r.tagit("assignedTags"),e=[],f;for(var t in n)u.currentTags.indexOf(n[t])<0&&e.push(n[t]);f=[];for(t in u.currentTags)n.indexOf(u.currentTags[t])<0&&f.push(u.currentTags[t]);if(u.currentTags=n,e.length||f.length)i.onTagsChange(e,f,u.currentTags)}var r=n(this),u=r.data("as-tags"),s={updateTags:o},i,e;if(t in s)return u?s[t]():void 0;if(!u){for(i=n.extend({initialTags:[],availableTags:[],allowSpaces:!1,removeConfirmation:!1,placeholderText:"",tagLimit:null,limitExceededMessage:"You have reach the tags limit.",invalidTagMessage:"This tag name is invalid, <br/>please select a different name.",onTagsChange:function(){},readOnly:!0,maxTagCharachters:20,messageVisibleTime:3e3,caseSensitive:!1},t),u={isPopoverVisible:!1,currentTags:i.initialTags},r.data("as-tags",u),r.tagit({afterTagAdded:f,beforeTagAdded:l,onTagLimitExceeded:c,availableTags:i.availableTags,allowSpaces:i.allowSpaces,removeConfirmation:i.removeConfirmation,placeholderText:i.placeholderText,tagLimit:i.tagLimit,readOnly:i.readOnly,caseSensitive:i.caseSensitive}),r.focusout(function(){setTimeout(function(){o()},1)}),r.keyup(function(n){n.keyCode==27?o():(n.keyCode==38||n.keyCode==40)&&f()}),e=0;e<i.initialTags.length;e++)r.tagit("createTag",i.initialTags[e]);i.readOnly&&(r.find(".tagit-new").hide(),i.initialTags.length==0&&r.prepend(n("<li/>").text("No tags")));r.find(".tagit-new input").attr("maxlength",i.maxTagCharachters);r.find(".tagit-new input").on("input",function(){f()}).trigger("input")}})};n.fn.markExclusively=function(t){n(this).addClass(t).siblings().removeClass(t)};n.fn.allowOnlyNumbers=function(){return this.each(function(){var t=n(this),i=t.data("as-only-numbers");if(!i){t.data("as-only-numbers",{});t.on("keypress",function(n){var t=n.keyCode?n.keyCode:n.which;return t>31&&(t<48||t>57)?(n.preventDefault(),!1):!0})}})};n.fn.fasttip=function(){return this.tooltipster({delay:0,position:"bottom"}),this};n.ui&&n.extend(n.ui.autocomplete.prototype.options,{open:function(){var t=n(this).autocomplete("widget");t.width(t.width()+20)}});n.fn.appseeFavorite=function(t){return this.each(function(){function c(){u(!0)}function l(){u(!1)}function a(){f(!1)}function v(){f(!0)}function s(){i.ajaxSettings?i.ajaxWorking||(i.ajaxWorking=!0,i.ajaxSettings.data.isFavourite=!i.isFavorite,n.ajax(i.ajaxSettings)):h()}function h(){i.isFavorite=!i.isFavorite;u(i.isFavorite);i.callback&&i.callback(i.ajaxSettings.data||i.isFavorite)}function u(n){var t="as-favorite-indication-on",u="as-favorite-indication-off";i.isFavorite=n;r.attr("title",function(){return n?"Remove from favorites":"Add to favorites"});r.addClass(function(){return n?t:u});r.removeClass(function(){return n?u:t});r.attr("data-favorite-state",n)}function f(n){var t="as-favorite-indication-disabled";i.disabled=n;n?(r.addClass(t),r.off("click")):(r.removeClass(t),r.click(s))}function y(){var e=r.attr("data-favorite-state");e=e?e.toLowerCase()==="true":!1;i=n.extend(!0,o,{isFavorite:e},t);r.data("as-favorite",i);r.empty();r.addClass("as-favorite-indication").append('<i class="fa fa-star fa-lg"><\/i>');u(i.isFavorite);f(i.disabled)}var r=n(this),i=r.data("as-favorite"),e={switchOn:c,switchOff:l,enable:a,disable:v,toggle:s},o;if(t in e)return i?e[t]():void 0;i||(o={isFavorite:!1,disabled:!1,callback:null,ajaxWorking:!1,ajaxSettings:{type:"POST",url:"/",data:{isFavourite:null},success:function(n){n.Status==="OK"&&h()},error:function(){alert("Sorry, Can't update favorite at the moment. Please try again later.")},complete:function(){i.ajaxWorking=!1}}},y())})}})(jQuery),function(n){Function.prototype.callWaiter=function(n){var i=this,t={shouldCall:!1};return t.reset=function(){t.shouldCall=!1},t.call=function(){t.shouldCall=!0;var r=arguments,u=this;setTimeout(function(){t.shouldCall&&i.apply(u,r)},n)},t};n&&(n.selection.prototype.tooltip=function(t){function h(){i.style("left",0).style("top",0).style("opacity",0).style("visibility","hidden")}var f=this,e=$(f.node()),i=f.append("div").attr("class","popover").style("position","absolute").style("display","block").style("opacity",0).style("visibility","hidden"),o=i.append("div").attr("class","tip"),c=i.append("div").attr("class","popover-content").style("text-align","center"),u,s=$(i.node()),r={context:null,hideCallback:null,show:function(t,r,h){var a;u.reset();this.context=r;this.hideCallback=h;o.classed({tl:!1,tr:!1,bl:!1,br:!1});a=$(c.node());a.empty();a.append(t);var l=n.mouse(f.node()),d=e.scrollLeft(),g=e.scrollTop(),p=l[0]+d,w=l[1]+g,v=s.outerWidth(),y=s.outerHeight(),b=e.width(),k=e.height(),nt=l[0]+v<b?p:p-v,tt=l[1]+y<k?w:w-y,it=l[0]+v<b?"l":"r",rt=l[1]+y<k?"t":"b";o.classed(rt+it,!0);i.style("visibility",null).style("left",nt+"px").style("top",tt+"px").style("opacity",1)},on:function(){return i.on.apply(i,arguments)}};f.style("position","relative");u=function(){h();r.hideCallback&&r.hideCallback.apply(r.context);r.hideCallback=null;r.context=null}.callWaiter(t);i.on("mouseenter",function(){u.reset()});i.on("mouseleave",u.call);return r.hide=u.call,r.forceHide=h,r},n.selection.prototype.elipsis=function(t,i){i=i?i:2;var r=this;r.each(function(){for(var u=n.select(this),f=this.getComputedTextLength(),r=u.text();f>t-2*i&&r.length>0;)r=r.slice(0,-1),u.text(r+"..."),f=this.getComputedTextLength()})},n.selection.prototype.loader=function(t,i){t=t?t:32;i=i?i:"#18bcf2";var e=this,r=t/2,f=4,o=t-f,u=r-f;return e.each(function(){var s=n.select(this),e=s.append("g").attr("transform","translate("+[-r,-r]+")");e.append("path").attr("d","M"+r+" 0 A"+r+" "+r+" 0 0 0 "+r+" "+t+" A"+r+" "+r+" 0 0 0 "+r+" 0 M"+r+" "+f+" A"+u+" "+u+" 0 0 1 "+r+" "+o+" A"+u+" "+u+" 0 0 1 "+r+" "+f).style("fill",i).attr("opacity",.25);e.append("path").attr("d","M"+r+" 0 A"+r+" "+r+" 0 0 1 "+t+" "+r+" L"+o+" "+r+" A"+u+" "+u+" 0 0 0 "+r+" "+f+"z").style("fill",i).append("animateTransform").attr("attributeName","transform").attr("type","rotate").attr("from","0 "+r+" "+r).attr("to","360 "+r+" "+r).attr("dur","0.6s").attr("repeatCount","indefinite")}),e})}(window.d3)