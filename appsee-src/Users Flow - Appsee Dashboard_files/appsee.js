var appsee={_actionChangeTransientHandlers:[],_actionChangePersistentHandlers:[],_windowResizeHandlers:{transients:{cont:[],onEnd:[]},persistents:{cont:{},onEnd:{}}},_successCallback:null,_readyCallbacks:$.Callbacks(),_errorCallback:null,_preparationCallback:null,_transientPreparationCallback:$.Callbacks(),_postContextOverride:null,_singleSegmentActions:[],_persistentActionParams:null,_persistentActionParamsFilter:function(){return!0},_lastResizeTime:new Date,_resizeTimeout:!1,_resizeEndDelta:200,aft:null,aftHeaderName:"_aft",hashChangesByCode:0,isIntegrated:{},isReadOnly:!1,absoluteTimeFormat:!1,popularSegments:{},deviceTypes:{},dataStore:{},setSingleSegmentActions:function(n){this._singleSegmentActions=n},isSingleSegmentAction:function(n){return $.inArray(n,this._singleSegmentActions)!=-1},context:{},initContext:function(n){this.context=n},guid:function(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},updateContext:function(n,t,i,r){var u,f;if(n=="action"){for(this._postContextOverride=null,this.context.actionParams=null,u=0;u<this._actionChangePersistentHandlers.length;u++)this._actionChangePersistentHandlers[u](t);for(f=0;f<this._actionChangeTransientHandlers.length;f++)this._actionChangeTransientHandlers[f](t);this._actionChangeTransientHandlers=[]}return this.context[n]=t,n=="platform"&&(this.context.device="all",this.context.version="all"),i?!0:this.postContext(n,r)},updateContextDeferred:function(n,t){return this.updateContext(n,t,!0)},_hasPersistentActionParameters:function(){return this._persistentActionParams&&this._persistentActionParamsFilter(this.context.action)},hasActionParameters:function(){return this.context.actionParams||this._hasPersistentActionParameters()},parseActionParameters:function(){var n={};return this.context.actionParams&&(n=appseeUtils.parseUrlQueryString(this.context.actionParams)),this._hasPersistentActionParameters()&&(n=appseeUtils.mergeObjects(n,appseeUtils.parseUrlQueryString(this._persistentActionParams))),n},setActionParameters:function(n){appsee.updateContextDeferred("actionParams","?"+appseeUtils.dictionaryToUrlQueryString(n))},setPersistentActionParams:function(n,t){this._persistentActionParams=n;this._persistentActionParamsFilter=t?t:function(){return!0}},clearPersistentActionParams:function(){this.setPersistentActionParams(null)},getIntegratedActionParams:function(){var n="",t;return this.context.actionParams&&(n+=this.context.actionParams),this._hasPersistentActionParameters()&&(t=n?"&":"?",n+=t+this._persistentActionParams),n},postContextPreparation:function(n,t){t?this._transientPreparationCallback.add(n):this._preparationCallback=n},postContextSuccessCallback:function(n){this._successCallback=n},postContextErrorCallback:function(n){this._errorCallback=n},postContextOverride:function(n){this._postContextOverride=n},ready:function(n){this._readyCallbacks.add(n)},loadPart:function(n,t,i,r){var u=this.context;i&&(u=$.extend({},u,i));$.ajax({type:"POST",url:n,data:u,success:function(n){t&&($.isFunction(t)?t(n):$(t).html(n))},error:function(n){if($.isFunction(r)){r(n);return}appsee._errorCallback&&appsee._errorCallback(n,r)}})},parseMultipartHtml:function(n){for(var i,r=$(n),t=1;t<arguments.length;t++)i=r.filter("part"+t),i.length>0&&($.isFunction(arguments[t])?arguments[t](i.html()):$(arguments[t]).html(i.html()))},postContext:function(n,t){var i,r;if(this.syncHashWithContext(),n=="platform")if(this.isIntegrated[this.context.platform]){if(this.context.action=="/error/noIntegration"&&(this.context.action=this.parseActionParameters().originalAction,this.context.actionParams=this.dataStore.oldParams,this.dataStore.oldParams=null,this.syncHashWithContext()),this.isSingleSegmentAction(this.context.action)){if(i=this.getLatestSegment(this.context.platform),!i)return!1;appsee.context.device=i.device;appsee.context.version=i.version;this.syncHashWithContext()}}else this._adjustContextForNoIntegration();else{if(this._postContextOverride!=null)return this._postContextOverride(n),!1;this.isIntegrated[this.context.platform]||this._adjustContextForNoIntegration()}return this._preparationCallback!=null&&this._preparationCallback(t),this._transientPreparationCallback.fire(n),this._transientPreparationCallback=$.Callbacks(),r=this.context.action+this.getIntegratedActionParams(),$.ajax({type:"POST",url:r,data:this.context,success:function(n){appsee._windowResizeHandlers.transients.cont=[];appsee._windowResizeHandlers.transients.onEnd=[];appsee._successCallback!=null&&appsee._successCallback(n);appsee.adjustFluidSpans();appsee._readyCallbacks.fire();appsee._readyCallbacks=$.Callbacks()},error:function(n){appsee._errorCallback&&appsee._errorCallback(n)}}),!1},_adjustContextForNoIntegration:function(){this.isIntegrated[this.context.platform]||this.context.action.match(/^\/settings/i)||this.context.action.match(/^\/accountmanagement/i)||(this.dataStore.oldParams=this.context.actionParams,this.context.actionParams="?originalAction="+this.context.action,this.context.action="/error/noIntegration")},getLatestSegment:function(n){var t;return $.ajax({async:!1,url:"/apps/anySegment?appName="+this.context.app+"&platform="+n,success:function(n){t=n},error:function(n){appsee._errorCallback&&appsee._errorCallback(n)}}),t},isValidHashForm:function(){var n=window.location.hash,i,u,r,t;if(n.length==0||n.length==1||(n=n.substring(1),i=n.split("#"),i.length<2)||(u=i[1],r=u.split("/"),r.length!=4))return!1;for(t=0;t<4;t++)if(r[t].trim()=="")return!1;return!0},syncContextWithHash:function(){var i=window.location.hash,t,r,n;i.length!=0&&(i=i.substring(1),t=i.split("#"),t.length>0&&(this.context.action=t[0]),t.length>1&&(r=t[1],n=r.split("/"),n.length==3&&n.unshift("ios"),n.length>0&&(this.context.platform=n[0].toLowerCase()),n.length>1&&(this.context.version=n[1]),n.length>2&&(this.context.date=n[2]),n.length>3&&(this.context.device=n[3])),this.context.actionParams=t.length>2?t[2]:null)},contextToUrlParameter:function(){return appseeUtils.dictionaryToUrlQueryString(this.context)},syncHashWithContext:function(){var n=this.getHash(),t=window.location.hash;n!=t&&(this.hashChangesByCode++,window.location.hash=n)},getHash:function(n){var i,t,u,f,e,r;return n||(n={}),n.hasOwnProperty("action")&&n.action?(i=n.action,n.hasOwnProperty("actionParams")&&n.actionParams&&(t=n.actionParams)):(i=this.context.action,this.context.actionParams&&(t=this.context.actionParams)),u=n.hasOwnProperty("platform")&&n.platform?n.platform:this.context.platform,f=n.hasOwnProperty("version")&&n.version?n.version:this.context.version,e=n.hasOwnProperty("device")&&n.device?n.device:this.context.device,r="#"+i+"#"+u+"/"+f+"/"+this.context.date+"/"+e,t&&(r+="#"+t),r},beforeActionChange:function(n,t){typeof t=="function"&&(n?this._actionChangePersistentHandlers.push(t):this._actionChangeTransientHandlers.push(t))},addWindowResizeHandler:function(n,t,i,r){typeof n=="string"&&typeof t=="function"&&(r?i?this._windowResizeHandlers.transients.onEnd.push(t):this._windowResizeHandlers.transients.cont.push(t):i?this._windowResizeHandlers.persistents.onEnd[n]=t:this._windowResizeHandlers.persistents.cont[n]=t)},addTransientWindowResizeHandler:function(n,t){this.addWindowResizeHandler("",n,t,!0)},removeWindowResizeHandler:function(n){typeof n=="string"&&(delete this._windowResizeHandlers.persistents.cont[n],delete this._windowResizeHandlers.persistents.onEnd[n])},executeWindowResizeHandlers:function(){var t,n;for(t in this._windowResizeHandlers.persistents.cont)this._windowResizeHandlers.persistents.cont[t]();for(n=0;n<this._windowResizeHandlers.transients.cont.length;n++)this._windowResizeHandlers.transients.cont[n]()},executeWindowResizeEndHandlers:function(){var t,n;if(new Date-appsee._lastResizeTime<appsee._resizeEndDelta)setTimeout(appsee.executeWindowResizeEndHandlers,appsee._resizeEndDelta);else{appsee._resizeTimeout=!1;for(t in appsee._windowResizeHandlers.persistents.onEnd)appsee._windowResizeHandlers.persistents.onEnd[t]();for(n=0;n<appsee._windowResizeHandlers.transients.onEnd.length;n++)appsee._windowResizeHandlers.transients.onEnd[n]()}},setGlobalAjaxHeaders:function(n){n.setRequestHeader(this.aftHeaderName,this.aft)},adjustFluidSpans:function(){$(".as-row-fluid").each(function(){var f=$(this),i=f.children("div"),r=i.length,s=f.width(),e=1e3,n=(s-e)/e;n=n>=0?n:0;var u=.3+9*n,t=(100-u*(r-1))/r,o=0;i.each(function(){var n=parseFloat($(this).css("max-width"));o+=!isNaN(n)&&n<t?n:t});u=(100-o)/(r-1);i.each(function(){var n=$(this),i=parseFloat(n.css("max-width")),r=!isNaN(i)&&i<t?i:t;n.css("width",r+"%");n.css("margin-left",u+"%")})});$(".as-table-row.as-dynamic").each(function(){var n=$(this),i=n.parent().innerWidth(),t=0;n.children("div").each(function(){var n=$(this),r=n.children();r.length>0&&(t+=r.first().outerWidth(),t>i?n.hide():n.show())})})},addEvent:function(n){try{gaEnabled&&ga("send","event",gaUser,n)}catch(t){}},reportAjaxError:function(n,t){if(this.dataStore.errorReports||(this.dataStore.errorReports={}),this.dataStore.errorReports[n]){delete this.dataStore.errorReports[n];return}appseeUtils.hasUserAbortedAjaxRequest(n)||n.status==500||this.reportError(t)},reportError:function(n){if(n){n.extraInfo||(n.extraInfo={});n.extraInfo["User Agent"]=navigator.userAgent;this.dataStore.errorReports||(this.dataStore.errorReports={});var t=this,i=$.ajax({type:"POST",url:"/error/ReportError",data:n,success:function(n,i,r){delete t.dataStore.errorReports[r]}});this.dataStore.errorReports[i]=!0}}};$(window).resize(function(){appsee.adjustFluidSpans();appsee._lastResizeTime=new Date;appsee._resizeTimeout===!1&&(appsee._resizeTimeout=!0,setTimeout(appsee.executeWindowResizeEndHandlers,appsee._resizeEndDelta));appsee.executeWindowResizeHandlers()});$(document).ajaxSuccess(function(n,t){var r=t.getResponseHeader("AppseeRedirect"),i;r&&location.replace(r);i=t.getResponseHeader(appsee.aftHeaderName);i&&(appsee.aft=i)});$(document).ajaxError(function(n,t,i,r){var u={source:"Ajax",url:i.url,errorDescription:r,extraInfo:{"Request Type":i.type,Data:i.data,"Error Status":t.status+""}};appsee.reportAjaxError(t,u)});$(document).ajaxSend(function(n,t,i){appsee.aft&&i&&i.type&&i.type.toLowerCase()=="post"&&appsee.setGlobalAjaxHeaders(t)});window.onerror=function(n,t,i,r,u){var f={source:"Javascript",url:t,errorDescription:n,extraInfo:{"Line Number":i}};r!==undefined&&(f.extraInfo["Column Number"]=r);u!==undefined&&u&&(u.hasOwnProperty("fileName")&&(f.extraInfo["File Name"]=u.fileName),u.hasOwnProperty("lineNumber")&&(f.extraInfo["Line Number"]=u.lineNumber),u.hasOwnProperty("stack")&&(f.extraInfo["Stack Trace"]=u.stack));appsee.reportError(f)};$(function(){$.cookie("timezoneoffset",Number(moment().utcOffset()).toString(),{path:"/"});var n=navigator.language||navigator.userLanguage;n&&$.cookie("userlanguage",n,{path:"/"})});$(document).keyup(function(n){n.which==27&&parent&&parent.$&&parent.$.magnificPopup&&parent.$.magnificPopup.close()})