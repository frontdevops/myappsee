/*! sprintf.js | Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro> | 3 clause BSD license */
(function(n){function i(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function u(n,t){for(var i=[];t>0;i[--t]=n);return i.join("")}var t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)},r;t.format=function(n,r){for(var a=1,p=n.length,h="",f,c=[],s,e,l,v,y,o=0;o<p;o++)if(h=i(n[o]),h==="string")c.push(n[o]);else if(h==="array"){if(e=n[o],e[2])for(f=r[a],s=0;s<e[2].length;s++){if(!f.hasOwnProperty(e[2][s]))throw t('[sprintf] property "%s" does not exist',e[2][s]);f=f[e[2][s]]}else f=e[1]?r[e[1]]:r[a++];if(/[^s]/.test(e[8])&&i(f)!="number")throw t("[sprintf] expecting number but found %s",i(f));switch(e[8]){case"b":f=f.toString(2);break;case"c":f=String.fromCharCode(f);break;case"d":f=parseInt(f,10);break;case"e":f=e[7]?f.toExponential(e[7]):f.toExponential();break;case"f":f=e[7]?parseFloat(f).toFixed(e[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=String(f))&&e[7]?f.substring(0,e[7]):f;break;case"u":f=f>>>0;break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}f=/[def]/.test(e[8])&&e[3]&&f>=0?"+"+f:f;v=e[4]?e[4]=="0"?"0":e[4].charAt(1):" ";y=e[6]-String(f).length;l=e[6]?u(v,y):"";c.push(e[5]?f+l:l+f)}return c.join("")};t.cache={};t.parse=function(n){for(var r=n,t=[],f=[],o=0;r;){if((t=/^[^\x25]+/.exec(r))!==null)f.push(t[0]);else if((t=/^\x25{2}/.exec(r))!==null)f.push("%");else if((t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r))!==null){if(t[2]){o|=1;var e=[],u=t[2],i=[];if((i=/^([a-z_][a-z_\d]*)/i.exec(u))!==null)for(e.push(i[1]);(u=u.substring(i[0].length))!=="";)if((i=/^\.([a-z_][a-z_\d]*)/i.exec(u))!==null)e.push(i[1]);else if((i=/^\[(\d+)\]/.exec(u))!==null)e.push(i[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";t[2]=e}else o|=2;if(o===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";f.push(t)}else throw"[sprintf] huh?";r=r.substring(t[0].length)}return f};r=function(n,i,r){return r=i.slice(0),r.splice(0,0,n),t.apply(null,r)};n.sprintf=t;n.vsprintf=r})(typeof exports!="undefined"?exports:window)